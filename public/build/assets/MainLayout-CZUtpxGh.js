import{g as z,p as Y,a as me,u as he,b as W,m as fe,o as K,c as Q,d as x,n as ge,e as pe,r as A,s as B,f as V,h as ye,w as D,i as Z,j as ee,k as we,t as N,l as U,q as te,V as ne,v,x as R,y as _e,z as be,A as q,B as Ce,C as Ee,D as Ie,E as Me,F as Se,G as De,H as Le,I as Ae,J as Ne,K as Re,L as se,M as ze,N as Ve,O as Ye,P as We,Q as Oe,R as Ue,S as $e,T as Fe,U as Xe,W as qe,X as Ze,Y as je,Z as Je,_ as Ge,$ as Ke,a0 as Qe,a1 as et,a2 as tt,a3 as at,a4 as lt,a5 as ot,a6 as nt,a7 as j,a8 as k,a9 as st,aa as ut,ab as J,ac as ue,ad as G,ae as O,af as re,ag as F,ah as ie,ai as ce,aj as rt,ak as it,al as X,am as ct,an as vt,ao as dt,ap as mt,aq as ht}from"./app-CJnZd0U8.js";import{c as ft,m as gt,u as ke,a as Te,b as pt}from"./layout-CTSaWMje.js";const yt=Y({...Q(),...K(gt(),["fullHeight"]),...fe()},"VApp"),wt=z()({name:"VApp",props:yt(),setup(e,r){let{slots:s}=r;const d=me(e),{layoutClasses:t,getLayoutItem:l,items:o,layoutRef:i}=ft({...e,fullHeight:!0}),{rtlClasses:h}=he();return W(()=>x("div",{ref:i,class:pe(["v-application",d.themeClasses.value,t.value,h.value,e.class]),style:ge([e.style])},[x("div",{class:"v-application__wrap"},[s.default?.()])])),{getLayoutItem:l,items:o,theme:d}}}),bt=Y({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function St(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:s,layoutSize:d}=r;let t=0,l=0;const o=A(null),i=B(0),h=B(0),c=B(0),f=B(!1),n=B(!1),g=B(!1),b=B(!1),S=B(!0),p=V(()=>Number(e.scrollThreshold)),M=V(()=>ye((p.value-i.value)/p.value||0));function I(y){const a="window"in y?window.innerHeight:y.clientHeight,u="window"in y?document.documentElement.scrollHeight:y.scrollHeight;return{clientHeight:a,scrollHeight:u}}function P(){const y=o.value;if(!y)return;const{clientHeight:a,scrollHeight:u}=I(y),w=u-a,m=d?.value||0,T=p.value+m;S.value=w>T}function C(){P()}function E(){const y=o.value;if(!y||s&&!s.value)return;t=i.value,i.value="window"in y?y.pageYOffset:y.scrollTop;const a=y instanceof Window?document.documentElement.scrollHeight:y.scrollHeight;l!==a&&(a>l&&P(),l=a),n.value=i.value<t,c.value=Math.abs(i.value-p.value);const{clientHeight:u,scrollHeight:w}=I(y),m=i.value+u>=w-5;!n.value&&m&&i.value>=p.value&&S.value&&(b.value=!0);const T=Math.abs(i.value-t)>100,_=i.value<=5;(n.value&&t-i.value>1&&!m||T&&i.value<p.value||_)&&(b.value=!1),g.value=m}return D(n,()=>{h.value=h.value||i.value}),D(f,()=>{h.value=0}),Z(()=>{D(()=>e.scrollTarget,y=>{const a=y?document.querySelector(y):window;a&&a!==o.value&&(o.value?.removeEventListener("scroll",E),o.value=a,o.value.addEventListener("scroll",E,{passive:!0}),Promise.resolve().then(()=>{P()}))},{immediate:!0}),window.addEventListener("resize",C,{passive:!0})}),ee(()=>{o.value?.removeEventListener("scroll",E),window.removeEventListener("resize",C)}),s&&D(s,E,{immediate:!0}),{scrollThreshold:p,currentScroll:i,currentThreshold:c,isScrollActive:f,scrollRatio:M,isScrollingUp:n,savedScroll:h,isAtBottom:g,reachedBottomWhileScrollingDown:b,hasEnoughScrollableSpace:S}}const Vt=Y({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},..._e(),...Te(),...bt(),height:{type:[Number,String],default:64}},"VAppBar"),kt=z()({name:"VAppBar",props:Vt(),emits:{"update:modelValue":e=>!0},setup(e,r){let{slots:s}=r;const d=A(),t=we(e,"modelValue"),l=V(()=>{const a=new Set(e.scrollBehavior?.split(" ")??[]);return{hide:a.has("hide"),fullyHide:a.has("fully-hide"),inverted:a.has("inverted"),collapse:a.has("collapse"),elevate:a.has("elevate"),fadeImage:a.has("fade-image")}}),o=V(()=>{const a=l.value;return a.hide||a.fullyHide||a.inverted||a.collapse||a.elevate||a.fadeImage||!t.value}),i=V(()=>{const a=d.value?.contentHeight??0,u=d.value?.extensionHeight??0;return a+u}),{currentScroll:h,scrollThreshold:c,isScrollingUp:f,scrollRatio:n,isAtBottom:g,reachedBottomWhileScrollingDown:b,hasEnoughScrollableSpace:S}=St(e,{canScroll:o,layoutSize:i}),p=N(()=>l.value.hide||l.value.fullyHide),M=V(()=>e.collapse||l.value.collapse&&(l.value.inverted?n.value>0:n.value===0)),I=V(()=>e.flat||l.value.fullyHide&&!t.value||l.value.elevate&&(l.value.inverted?h.value>0:h.value===0)),P=V(()=>l.value.fadeImage?l.value.inverted?1-n.value:n.value:void 0),C=V(()=>{if(l.value.hide&&l.value.inverted)return 0;const a=d.value?.contentHeight??0,u=d.value?.extensionHeight??0;return p.value?h.value<c.value||l.value.fullyHide?a+u:a:a+u});U(()=>!!e.scrollBehavior,()=>{be(()=>{if(!p.value){t.value=!0;return}if(l.value.inverted){t.value=h.value>c.value;return}if(!S.value){t.value=!0;return}if(b.value){t.value=!1;return}t.value=f.value&&!g.value||h.value<c.value})});const{ssrBootStyles:E}=te(),{layoutItemStyles:y}=ke({id:e.name,order:V(()=>parseInt(e.order,10)),position:N(()=>e.location),layoutSize:C,elementSize:B(void 0),active:t,absolute:N(()=>e.absolute)});return W(()=>{const a=ne.filterProps(e);return v(ne,R({ref:d,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...y.value,"--v-toolbar-image-opacity":P.value,height:void 0,...E.value},e.style]},a,{collapse:M.value,flat:I.value}),s)}),{}}}),Tt=Y({...K(Ce({icon:"$menu",variant:"text"}),["spaced"])},"VAppBarNavIcon"),Bt=z()({name:"VAppBarNavIcon",props:Tt(),setup(e,r){let{slots:s}=r;return W(()=>v(q,R(e,{class:["v-app-bar-nav-icon"]}),s)),{}}}),Ht=z()({name:"VAppBarTitle",props:Ee(),setup(e,r){let{slots:s}=r;return W(()=>v(Ie,R(e,{class:"v-app-bar-title"}),s)),{}}}),xt=Y({scrollable:Boolean,...Q(),...De(),...Se({tag:"main"})},"VMain"),Pt=z()({name:"VMain",props:xt(),setup(e,r){let{slots:s}=r;const{dimensionStyles:d}=Me(e),{mainStyles:t}=pt(),{ssrBootStyles:l}=te();return W(()=>v(e.tag,{class:pe(["v-main",{"v-main--scrollable":e.scrollable},e.class]),style:ge([t.value,l.value,d.value,e.style])},{default:()=>[e.scrollable?x("div",{class:"v-main__scroller"},[s.default?.()]):s.default?.()]})),{}}});function _t(e){let{rootEl:r,isSticky:s,layoutItemStyles:d}=e;const t=B(!1),l=B(0),o=V(()=>{const c=typeof t.value=="boolean"?"top":t.value;return[s.value?{top:"auto",bottom:"auto",height:void 0}:void 0,t.value?{[c]:Le(l.value)}:{top:d.value.top}]});Z(()=>{D(s,c=>{c?window.addEventListener("scroll",h,{passive:!0}):window.removeEventListener("scroll",h)},{immediate:!0})}),ee(()=>{window.removeEventListener("scroll",h)});let i=0;function h(){const c=i>window.scrollY?"up":"down",f=r.value.getBoundingClientRect(),n=parseFloat(d.value.top??0),g=window.scrollY-Math.max(0,l.value-n),b=f.height+Math.max(l.value,n)-window.scrollY-window.innerHeight,S=parseFloat(getComputedStyle(r.value).getPropertyValue("--v-body-scroll-y"))||0;f.height<window.innerHeight-n?(t.value="top",l.value=n):c==="up"&&t.value==="bottom"||c==="down"&&t.value==="top"?(l.value=window.scrollY+f.top-S,t.value=!0):c==="down"&&b<=0?(l.value=0,t.value="bottom"):c==="up"&&g<=0&&(S?t.value!=="top"&&(l.value=-g+S+n,t.value="top"):(l.value=f.top+g,t.value="top")),i=window.scrollY}return{isStuck:t,stickyStyles:o}}const Ct=100,Et=20;function ve(e){return(e<0?-1:1)*Math.sqrt(Math.abs(e))*1.41421356237}function de(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let r=0;for(let s=e.length-1;s>0;s--){if(e[s].t===e[s-1].t)continue;const d=ve(r),t=(e[s].d-e[s-1].d)/(e[s].t-e[s-1].t);r+=(t-d)*Math.abs(t),s===e.length-1&&(r*=.5)}return ve(r)*1e3}function It(){const e={};function r(t){Array.from(t.changedTouches).forEach(l=>{(e[l.identifier]??(e[l.identifier]=new Ae(Et))).push([t.timeStamp,l])})}function s(t){Array.from(t.changedTouches).forEach(l=>{delete e[l.identifier]})}function d(t){const l=e[t]?.values().reverse();if(!l)throw new Error(`No samples for touch id ${t}`);const o=l[0],i=[],h=[];for(const c of l){if(o[0]-c[0]>Ct)break;i.push({t:c[0],d:c[1].clientX}),h.push({t:c[0],d:c[1].clientY})}return{x:de(i),y:de(h),get direction(){const{x:c,y:f}=this,[n,g]=[Math.abs(c),Math.abs(f)];return n>g&&c>=0?"right":n>g&&c<=0?"left":g>n&&f>=0?"down":g>n&&f<=0?"up":Mt()}}}return{addMovement:r,endTouch:s,getVelocity:d}}function Mt(){throw new Error}function Dt(e){let{el:r,isActive:s,isTemporary:d,width:t,touchless:l,position:o}=e;Z(()=>{window.addEventListener("touchstart",P,{passive:!0}),window.addEventListener("touchmove",C,{passive:!1}),window.addEventListener("touchend",E,{passive:!0})}),ee(()=>{window.removeEventListener("touchstart",P),window.removeEventListener("touchmove",C),window.removeEventListener("touchend",E)});const i=V(()=>["left","right"].includes(o.value)),{addMovement:h,endTouch:c,getVelocity:f}=It();let n=!1;const g=B(!1),b=B(0),S=B(0);let p;function M(a,u){return(o.value==="left"?a:o.value==="right"?document.documentElement.clientWidth-a:o.value==="top"?a:o.value==="bottom"?document.documentElement.clientHeight-a:L())-(u?t.value:0)}function I(a){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const w=o.value==="left"?(a-S.value)/t.value:o.value==="right"?(document.documentElement.clientWidth-a-S.value)/t.value:o.value==="top"?(a-S.value)/t.value:o.value==="bottom"?(document.documentElement.clientHeight-a-S.value)/t.value:L();return u?ye(w):w}function P(a){if(l.value)return;const u=a.changedTouches[0].clientX,w=a.changedTouches[0].clientY,m=25,T=o.value==="left"?u<m:o.value==="right"?u>document.documentElement.clientWidth-m:o.value==="top"?w<m:o.value==="bottom"?w>document.documentElement.clientHeight-m:L(),_=s.value&&(o.value==="left"?u<t.value:o.value==="right"?u>document.documentElement.clientWidth-t.value:o.value==="top"?w<t.value:o.value==="bottom"?w>document.documentElement.clientHeight-t.value:L());(T||_||s.value&&d.value)&&(p=[u,w],S.value=M(i.value?u:w,s.value),b.value=I(i.value?u:w),n=S.value>-20&&S.value<80,c(a),h(a))}function C(a){const u=a.changedTouches[0].clientX,w=a.changedTouches[0].clientY;if(n){if(!a.cancelable){n=!1;return}const T=Math.abs(u-p[0]),_=Math.abs(w-p[1]);(i.value?T>_&&T>3:_>T&&_>3)?(g.value=!0,n=!1):(i.value?_:T)>3&&(n=!1)}if(!g.value)return;a.preventDefault(),h(a);const m=I(i.value?u:w,!1);b.value=Math.max(0,Math.min(1,m)),m>1?S.value=M(i.value?u:w,!0):m<0&&(S.value=M(i.value?u:w,!1))}function E(a){if(n=!1,!g.value)return;h(a),g.value=!1;const u=f(a.changedTouches[0].identifier),w=Math.abs(u.x),m=Math.abs(u.y);(i.value?w>m&&w>400:m>w&&m>3)?s.value=u.direction===({left:"right",right:"left",top:"down",bottom:"up"}[o.value]||L()):s.value=b.value>.5}const y=V(()=>g.value?{transform:o.value==="left"?`translateX(calc(-100% + ${b.value*t.value}px))`:o.value==="right"?`translateX(calc(100% - ${b.value*t.value}px))`:o.value==="top"?`translateY(calc(-100% + ${b.value*t.value}px))`:o.value==="bottom"?`translateY(calc(100% - ${b.value*t.value}px))`:L(),transition:"none"}:void 0);return U(g,()=>{const a=r.value?.style.transform??null,u=r.value?.style.transition??null;be(()=>{r.value?.style.setProperty("transform",y.value?.transform||"none"),r.value?.style.setProperty("transition",y.value?.transition||null)}),Ne(()=>{r.value?.style.setProperty("transform",a),r.value?.style.setProperty("transition",u)})}),{isDragging:g,dragProgress:b,dragStyles:y}}function L(){throw new Error}const Lt=["start","end","left","right","top","bottom"],At=Y({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>Lt.includes(e)},sticky:Boolean,...et(),...Q(),...Qe(),...Ke({mobile:null}),...Ge(),...Te(),...Je(),...K(tt(),["disableInitialFocus"]),...Se({tag:"nav"}),...fe()},"VNavigationDrawer"),Nt=z()({name:"VNavigationDrawer",props:At(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,r){let{attrs:s,emit:d,slots:t}=r;const{isRtl:l}=he(),{themeClasses:o}=me(e),{borderClasses:i}=Re(e),{backgroundColorClasses:h,backgroundColorStyles:c}=se(()=>e.color),{elevationClasses:f}=ze(e),{displayClasses:n,mobile:g}=Ve(e),{roundedClasses:b}=Ye(e),S=We(),p=we(e,"modelValue",null,H=>!!H),{ssrBootStyles:M}=te(),{scopeId:I}=Oe(),P=A(),C=B(!1),{runOpenDelay:E,runCloseDelay:y}=qe(e,H=>{C.value=H}),a=V(()=>e.rail&&e.expandOnHover&&C.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),u=V(()=>Ue(e.location,l.value)),w=N(()=>e.persistent),m=V(()=>!e.permanent&&(g.value||e.temporary)),T=V(()=>e.sticky&&!m.value&&u.value!=="bottom");$e(e,{isActive:p,localTop:m,contentEl:P}),U(()=>e.expandOnHover&&e.rail!=null,()=>{D(C,H=>d("update:rail",!H))}),U(()=>!e.disableResizeWatcher,()=>{D(m,H=>!e.permanent&&at(()=>p.value=!H))}),U(()=>!e.disableRouteWatcher&&!!S,()=>{D(S.currentRoute,()=>m.value&&(p.value=!1))}),D(()=>e.permanent,H=>{H&&(p.value=!0)}),e.modelValue==null&&!m.value&&(p.value=e.permanent||!g.value);const{isDragging:_,dragProgress:$}=Dt({el:P,isActive:p,isTemporary:m,width:a,touchless:N(()=>e.touchless),position:u}),Be=V(()=>{const H=m.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):a.value;return _.value?H*$.value:H}),{layoutItemStyles:ae,layoutItemScrimStyles:He}=ke({id:e.name,order:V(()=>parseInt(e.order,10)),position:u,layoutSize:Be,elementSize:a,active:Fe(p),disableTransitions:N(()=>_.value),absolute:V(()=>e.absolute||T.value&&typeof le.value!="string")}),{isStuck:le,stickyStyles:xe}=_t({rootEl:P,isSticky:T,layoutItemStyles:ae}),oe=se(()=>typeof e.scrim=="string"?e.scrim:null),Pe=V(()=>({..._.value?{opacity:$.value*.2,transition:"none"}:void 0,...He.value}));return Xe({VList:{bgColor:"transparent"}}),W(()=>{const H=t.image||e.image;return x(je,null,[v(e.tag,R({ref:P,onMouseenter:E,onMouseleave:y,class:["v-navigation-drawer",`v-navigation-drawer--${u.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":C.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":m.value,"v-navigation-drawer--persistent":w.value,"v-navigation-drawer--active":p.value,"v-navigation-drawer--sticky":T.value},o.value,h.value,i.value,n.value,f.value,b.value,e.class],style:[c.value,ae.value,M.value,xe.value,e.style],inert:!p.value},I,s),{default:()=>[H&&x("div",{key:"image",class:"v-navigation-drawer__img"},[t.image?v(ot,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},t.image):v(lt,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),t.prepend&&x("div",{class:"v-navigation-drawer__prepend"},[t.prepend?.()]),x("div",{class:"v-navigation-drawer__content"},[t.default?.()]),t.append&&x("div",{class:"v-navigation-drawer__append"},[t.append?.()])]}),v(Ze,{name:"fade-transition"},{default:()=>[m.value&&(_.value||p.value)&&!!e.scrim&&x("div",R({class:["v-navigation-drawer__scrim",oe.backgroundColorClasses.value],style:[Pe.value,oe.backgroundColorStyles.value],onClick:()=>{w.value||(p.value=!1)}},I),null)]})])}),{isStuck:le}}}),Rt={class:"pa-2"},zt={class:"text-primary font-weight-bold"},Yt={class:"mx-auto text-center"},Wt={class:"mb-1"},Ot={class:"text-caption text-grey"},Ft={__name:"MainLayout",setup(e){const{mobile:r}=Ve(),s=nt(),d=A(!r.value),t=A(null),l=st(),o=A(!1),i=V(()=>{if(!t.value||!t.value.name)return"U";const f=t.value.name.split(" ");return f.length>=2?(f[0][0]+f[1][0]).toUpperCase():t.value.name.substring(0,2).toUpperCase()});Z(()=>{d.value=!r.value;const f=localStorage.getItem("user");f&&(t.value=JSON.parse(f));const n=localStorage.getItem("theme");n&&(s.global.name.value=n,o.value=n==="dark")});const h=()=>{s.global.name.value=o.value?"dark":"light",localStorage.setItem("theme",s.global.name.value)},c=async()=>{try{await ht.post("/api/logout")}catch(f){console.error(f)}finally{localStorage.removeItem("token"),localStorage.removeItem("user"),l.push("/login")}};return(f,n)=>{const g=ut("router-view");return J(),j(wt,null,{default:k(()=>[v(Nt,{modelValue:d.value,"onUpdate:modelValue":n[0]||(n[0]=b=>d.value=b),permanent:!ue(r)},{append:k(()=>[x("div",Rt,[v(q,{block:"",color:"error",variant:"text",onClick:c},{default:k(()=>[v(ie,{start:""},{default:k(()=>[...n[3]||(n[3]=[F("mdi-logout",-1)])]),_:1}),n[4]||(n[4]=F(" Cerrar Sesión ",-1))]),_:1})])]),default:k(()=>[v(G,null,{default:k(()=>[v(O,{"prepend-avatar":"https://randomuser.me/api/portraits/lego/1.jpg",title:t.value?.name||"Usuario",subtitle:t.value?.email||"email@example.com"},null,8,["title","subtitle"])]),_:1}),v(re),v(G,{density:"compact",nav:""},{default:k(()=>[v(O,{"prepend-icon":"mdi-home",title:"Inicio",value:"home",to:"/"}),v(O,{"prepend-icon":"mdi-chart-bar",title:"Estadísticas",value:"stats",to:"/stats"})]),_:1})]),_:1},8,["modelValue","permanent"]),v(kt,{color:"primary",density:"compact"},{default:k(()=>[ue(r)?(J(),j(Bt,{key:0,variant:"text",onClick:n[1]||(n[1]=rt(b=>d.value=!d.value,["stop"]))})):ce("",!0),v(Ht,null,{default:k(()=>[...n[5]||(n[5]=[F("Finanzas Personales",-1)])]),_:1}),v(it),v(q,{icon:"",onClick:n[2]||(n[2]=b=>{o.value=!o.value,h()})},{default:k(()=>[v(ie,null,{default:k(()=>[F(X(o.value?"mdi-weather-sunny":"mdi-weather-night"),1)]),_:1})]),_:1}),t.value?(J(),j(ct,{key:1,"min-width":"200px",rounded:""},{activator:k(({props:b})=>[v(q,R({icon:""},b,{class:"ml-2"}),{default:k(()=>[v(mt,{color:"white",size:"small"},{default:k(()=>[x("span",zt,X(i.value),1)]),_:1})]),_:1},16)]),default:k(()=>[v(vt,null,{default:k(()=>[v(dt,null,{default:k(()=>[x("div",Yt,[x("h3",Wt,X(t.value.name),1),x("p",Ot,X(t.value.email),1),v(re,{class:"my-3"}),v(G,{density:"compact",nav:""},{default:k(()=>[v(O,{"prepend-icon":"mdi-account",title:"Mi Perfil",to:"/profile"}),v(O,{"prepend-icon":"mdi-logout",title:"Cerrar Sesión",onClick:c,color:"error"})]),_:1})])]),_:1})]),_:1})]),_:1})):ce("",!0)]),_:1}),v(Pt,null,{default:k(()=>[v(g)]),_:1})]),_:1})}}};export{Ft as default};
