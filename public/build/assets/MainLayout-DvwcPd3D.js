import{p as W,r as A,s as k,c as b,a as ne,w as D,o as O,b as q,g as $,u as se,t as _,d as L,e as re,f as ue,h as F,V as G,i as w,m as Y,j as ie,k as pe,l as ce,n as ve,q as de,v as we,x as be,y as Se,z as Ve,C as Te,A as ke,B as Be,D as He,E as Ee,F as K,G as xe,H as me,I as Pe,J as Ie,K as Me,L as Ce,M as De,N as Ne,O as Re,P as N,Q as _e,T as Le,R as Ae,S as Ye,U as ze,W as We,X as Oe,Y as $e,Z as Fe,_ as Ue,$ as Xe,a0 as qe,a1 as Ze,a2 as je,a3 as Je,a4 as Q,a5 as M,a6 as Ge,a7 as Ke,a8 as Qe,a9 as ee,aa as te,ab as ae,ac as U,ad as et,ae as X,af as tt,ag as at,ah as lt,ai as ot,aj as nt,ak as st}from"./app-BtYwqK-H.js";const rt=W({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function ut(e){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:s,layoutSize:y}=u;let a=0,o=0;const l=A(null),n=k(0),f=k(0),i=k(0),V=k(!1),c=k(!1),g=k(!1),S=k(!1),p=k(!0),d=b(()=>Number(e.scrollThreshold)),C=b(()=>ne((d.value-n.value)/d.value||0));function I(m){const t="window"in m?window.innerHeight:m.clientHeight,r="window"in m?document.documentElement.scrollHeight:m.scrollHeight;return{clientHeight:t,scrollHeight:r}}function H(){const m=l.value;if(!m)return;const{clientHeight:t,scrollHeight:r}=I(m),h=r-t,v=y?.value||0,T=d.value+v;p.value=h>T}function x(){H()}function P(){const m=l.value;if(!m||s&&!s.value)return;a=n.value,n.value="window"in m?m.pageYOffset:m.scrollTop;const t=m instanceof Window?document.documentElement.scrollHeight:m.scrollHeight;o!==t&&(t>o&&H(),o=t),c.value=n.value<a,i.value=Math.abs(n.value-d.value);const{clientHeight:r,scrollHeight:h}=I(m),v=n.value+r>=h-5;!c.value&&v&&n.value>=d.value&&p.value&&(S.value=!0);const T=Math.abs(n.value-a)>100,E=n.value<=5;(c.value&&a-n.value>1&&!v||T&&n.value<d.value||E)&&(S.value=!1),g.value=v}return D(c,()=>{f.value=f.value||n.value}),D(V,()=>{f.value=0}),O(()=>{D(()=>e.scrollTarget,m=>{const t=m?document.querySelector(m):window;t&&t!==l.value&&(l.value?.removeEventListener("scroll",P),l.value=t,l.value.addEventListener("scroll",P,{passive:!0}),Promise.resolve().then(()=>{H()}))},{immediate:!0}),window.addEventListener("resize",x,{passive:!0})}),q(()=>{l.value?.removeEventListener("scroll",P),window.removeEventListener("resize",x)}),s&&D(s,P,{immediate:!0}),{scrollThreshold:d,currentScroll:n,currentThreshold:i,isScrollActive:V,scrollRatio:C,isScrollingUp:c,savedScroll:f,isAtBottom:g,reachedBottomWhileScrollingDown:S,hasEnoughScrollableSpace:p}}const it=W({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...pe(),...ie(),...rt(),height:{type:[Number,String],default:64}},"VAppBar"),ct=$()({name:"VAppBar",props:it(),emits:{"update:modelValue":e=>!0},setup(e,u){let{slots:s}=u;const y=A(),a=se(e,"modelValue"),o=b(()=>{const t=new Set(e.scrollBehavior?.split(" ")??[]);return{hide:t.has("hide"),fullyHide:t.has("fully-hide"),inverted:t.has("inverted"),collapse:t.has("collapse"),elevate:t.has("elevate"),fadeImage:t.has("fade-image")}}),l=b(()=>{const t=o.value;return t.hide||t.fullyHide||t.inverted||t.collapse||t.elevate||t.fadeImage||!a.value}),n=b(()=>{const t=y.value?.contentHeight??0,r=y.value?.extensionHeight??0;return t+r}),{currentScroll:f,scrollThreshold:i,isScrollingUp:V,scrollRatio:c,isAtBottom:g,reachedBottomWhileScrollingDown:S,hasEnoughScrollableSpace:p}=ut(e,{canScroll:l,layoutSize:n}),d=_(()=>o.value.hide||o.value.fullyHide),C=b(()=>e.collapse||o.value.collapse&&(o.value.inverted?c.value>0:c.value===0)),I=b(()=>e.flat||o.value.fullyHide&&!a.value||o.value.elevate&&(o.value.inverted?f.value>0:f.value===0)),H=b(()=>o.value.fadeImage?o.value.inverted?1-c.value:c.value:void 0),x=b(()=>{if(o.value.hide&&o.value.inverted)return 0;const t=y.value?.contentHeight??0,r=y.value?.extensionHeight??0;return d.value?f.value<i.value||o.value.fullyHide?t+r:t:t+r});L(()=>!!e.scrollBehavior,()=>{ce(()=>{if(!d.value){a.value=!0;return}if(o.value.inverted){a.value=f.value>i.value;return}if(!p.value){a.value=!0;return}if(S.value){a.value=!1;return}a.value=V.value&&!g.value||f.value<i.value})});const{ssrBootStyles:P}=re(),{layoutItemStyles:m}=ue({id:e.name,order:b(()=>parseInt(e.order,10)),position:_(()=>e.location),layoutSize:x,elementSize:k(void 0),active:a,absolute:_(()=>e.absolute)});return F(()=>{const t=G.filterProps(e);return w(G,Y({ref:y,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...m.value,"--v-toolbar-image-opacity":H.value,height:void 0,...P.value},e.style]},t,{collapse:C.value,flat:I.value}),s)}),{}}}),vt=W({...de(we({icon:"$menu",variant:"text"}),["spaced"])},"VAppBarNavIcon"),dt=$()({name:"VAppBarNavIcon",props:vt(),setup(e,u){let{slots:s}=u;return F(()=>w(ve,Y(e,{class:["v-app-bar-nav-icon"]}),s)),{}}}),mt=$()({name:"VAppBarTitle",props:be(),setup(e,u){let{slots:s}=u;return F(()=>w(Se,Y(e,{class:"v-app-bar-title"}),s)),{}}});function ht(e){let{rootEl:u,isSticky:s,layoutItemStyles:y}=e;const a=k(!1),o=k(0),l=b(()=>{const i=typeof a.value=="boolean"?"top":a.value;return[s.value?{top:"auto",bottom:"auto",height:void 0}:void 0,a.value?{[i]:Ve(o.value)}:{top:y.value.top}]});O(()=>{D(s,i=>{i?window.addEventListener("scroll",f,{passive:!0}):window.removeEventListener("scroll",f)},{immediate:!0})}),q(()=>{window.removeEventListener("scroll",f)});let n=0;function f(){const i=n>window.scrollY?"up":"down",V=u.value.getBoundingClientRect(),c=parseFloat(y.value.top??0),g=window.scrollY-Math.max(0,o.value-c),S=V.height+Math.max(o.value,c)-window.scrollY-window.innerHeight,p=parseFloat(getComputedStyle(u.value).getPropertyValue("--v-body-scroll-y"))||0;V.height<window.innerHeight-c?(a.value="top",o.value=c):i==="up"&&a.value==="bottom"||i==="down"&&a.value==="top"?(o.value=window.scrollY+V.top-p,a.value=!0):i==="down"&&S<=0?(o.value=0,a.value="bottom"):i==="up"&&g<=0&&(p?a.value!=="top"&&(o.value=-g+p+c,a.value="top"):(o.value=V.top+g,a.value="top")),n=window.scrollY}return{isStuck:a,stickyStyles:l}}const ft=100,gt=20;function le(e){return(e<0?-1:1)*Math.sqrt(Math.abs(e))*1.41421356237}function oe(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let u=0;for(let s=e.length-1;s>0;s--){if(e[s].t===e[s-1].t)continue;const y=le(u),a=(e[s].d-e[s-1].d)/(e[s].t-e[s-1].t);u+=(a-y)*Math.abs(a),s===e.length-1&&(u*=.5)}return le(u)*1e3}function yt(){const e={};function u(a){Array.from(a.changedTouches).forEach(o=>{(e[o.identifier]??(e[o.identifier]=new Te(gt))).push([a.timeStamp,o])})}function s(a){Array.from(a.changedTouches).forEach(o=>{delete e[o.identifier]})}function y(a){const o=e[a]?.values().reverse();if(!o)throw new Error(`No samples for touch id ${a}`);const l=o[0],n=[],f=[];for(const i of o){if(l[0]-i[0]>ft)break;n.push({t:i[0],d:i[1].clientX}),f.push({t:i[0],d:i[1].clientY})}return{x:oe(n),y:oe(f),get direction(){const{x:i,y:V}=this,[c,g]=[Math.abs(i),Math.abs(V)];return c>g&&i>=0?"right":c>g&&i<=0?"left":g>c&&V>=0?"down":g>c&&V<=0?"up":pt()}}}return{addMovement:u,endTouch:s,getVelocity:y}}function pt(){throw new Error}function wt(e){let{el:u,isActive:s,isTemporary:y,width:a,touchless:o,position:l}=e;O(()=>{window.addEventListener("touchstart",H,{passive:!0}),window.addEventListener("touchmove",x,{passive:!1}),window.addEventListener("touchend",P,{passive:!0})}),q(()=>{window.removeEventListener("touchstart",H),window.removeEventListener("touchmove",x),window.removeEventListener("touchend",P)});const n=b(()=>["left","right"].includes(l.value)),{addMovement:f,endTouch:i,getVelocity:V}=yt();let c=!1;const g=k(!1),S=k(0),p=k(0);let d;function C(t,r){return(l.value==="left"?t:l.value==="right"?document.documentElement.clientWidth-t:l.value==="top"?t:l.value==="bottom"?document.documentElement.clientHeight-t:R())-(r?a.value:0)}function I(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const h=l.value==="left"?(t-p.value)/a.value:l.value==="right"?(document.documentElement.clientWidth-t-p.value)/a.value:l.value==="top"?(t-p.value)/a.value:l.value==="bottom"?(document.documentElement.clientHeight-t-p.value)/a.value:R();return r?ne(h):h}function H(t){if(o.value)return;const r=t.changedTouches[0].clientX,h=t.changedTouches[0].clientY,v=25,T=l.value==="left"?r<v:l.value==="right"?r>document.documentElement.clientWidth-v:l.value==="top"?h<v:l.value==="bottom"?h>document.documentElement.clientHeight-v:R(),E=s.value&&(l.value==="left"?r<a.value:l.value==="right"?r>document.documentElement.clientWidth-a.value:l.value==="top"?h<a.value:l.value==="bottom"?h>document.documentElement.clientHeight-a.value:R());(T||E||s.value&&y.value)&&(d=[r,h],p.value=C(n.value?r:h,s.value),S.value=I(n.value?r:h),c=p.value>-20&&p.value<80,i(t),f(t))}function x(t){const r=t.changedTouches[0].clientX,h=t.changedTouches[0].clientY;if(c){if(!t.cancelable){c=!1;return}const T=Math.abs(r-d[0]),E=Math.abs(h-d[1]);(n.value?T>E&&T>3:E>T&&E>3)?(g.value=!0,c=!1):(n.value?E:T)>3&&(c=!1)}if(!g.value)return;t.preventDefault(),f(t);const v=I(n.value?r:h,!1);S.value=Math.max(0,Math.min(1,v)),v>1?p.value=C(n.value?r:h,!0):v<0&&(p.value=C(n.value?r:h,!1))}function P(t){if(c=!1,!g.value)return;f(t),g.value=!1;const r=V(t.changedTouches[0].identifier),h=Math.abs(r.x),v=Math.abs(r.y);(n.value?h>v&&h>400:v>h&&v>3)?s.value=r.direction===({left:"right",right:"left",top:"down",bottom:"up"}[l.value]||R()):s.value=S.value>.5}const m=b(()=>g.value?{transform:l.value==="left"?`translateX(calc(-100% + ${S.value*a.value}px))`:l.value==="right"?`translateX(calc(100% - ${S.value*a.value}px))`:l.value==="top"?`translateY(calc(-100% + ${S.value*a.value}px))`:l.value==="bottom"?`translateY(calc(100% - ${S.value*a.value}px))`:R(),transition:"none"}:void 0);return L(g,()=>{const t=u.value?.style.transform??null,r=u.value?.style.transition??null;ce(()=>{u.value?.style.setProperty("transform",m.value?.transform||"none"),u.value?.style.setProperty("transition",m.value?.transition||null)}),ke(()=>{u.value?.style.setProperty("transform",t),u.value?.style.setProperty("transition",r)})}),{isDragging:g,dragProgress:S,dragStyles:m}}function R(){throw new Error}const bt=["start","end","left","right","top","bottom"],St=W({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>bt.includes(e)},sticky:Boolean,...Xe(),...Ue(),...Fe(),...$e({mobile:null}),...Oe(),...ie(),...We(),...de(qe(),["disableInitialFocus"]),...ze({tag:"nav"}),...Ye()},"VNavigationDrawer"),Vt=$()({name:"VNavigationDrawer",props:St(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,u){let{attrs:s,emit:y,slots:a}=u;const{isRtl:o}=Be(),{themeClasses:l}=He(e),{borderClasses:n}=Ee(e),{backgroundColorClasses:f,backgroundColorStyles:i}=K(()=>e.color),{elevationClasses:V}=xe(e),{displayClasses:c,mobile:g}=me(e),{roundedClasses:S}=Pe(e),p=Ie(),d=se(e,"modelValue",null,B=>!!B),{ssrBootStyles:C}=re(),{scopeId:I}=Me(),H=A(),x=k(!1),{runOpenDelay:P,runCloseDelay:m}=_e(e,B=>{x.value=B}),t=b(()=>e.rail&&e.expandOnHover&&x.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),r=b(()=>Ce(e.location,o.value)),h=_(()=>e.persistent),v=b(()=>!e.permanent&&(g.value||e.temporary)),T=b(()=>e.sticky&&!v.value&&r.value!=="bottom");De(e,{isActive:d,localTop:v,contentEl:H}),L(()=>e.expandOnHover&&e.rail!=null,()=>{D(x,B=>y("update:rail",!B))}),L(()=>!e.disableResizeWatcher,()=>{D(v,B=>!e.permanent&&Ze(()=>d.value=!B))}),L(()=>!e.disableRouteWatcher&&!!p,()=>{D(p.currentRoute,()=>v.value&&(d.value=!1))}),D(()=>e.permanent,B=>{B&&(d.value=!0)}),e.modelValue==null&&!v.value&&(d.value=e.permanent||!g.value);const{isDragging:E,dragProgress:z}=wt({el:H,isActive:d,isTemporary:v,width:t,touchless:_(()=>e.touchless),position:r}),he=b(()=>{const B=v.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):t.value;return E.value?B*z.value:B}),{layoutItemStyles:Z,layoutItemScrimStyles:fe}=ue({id:e.name,order:b(()=>parseInt(e.order,10)),position:r,layoutSize:he,elementSize:t,active:Ne(d),disableTransitions:_(()=>E.value),absolute:b(()=>e.absolute||T.value&&typeof j.value!="string")}),{isStuck:j,stickyStyles:ge}=ht({rootEl:H,isSticky:T,layoutItemStyles:Z}),J=K(()=>typeof e.scrim=="string"?e.scrim:null),ye=b(()=>({...E.value?{opacity:z.value*.2,transition:"none"}:void 0,...fe.value}));return Re({VList:{bgColor:"transparent"}}),F(()=>{const B=a.image||e.image;return N(Ae,null,[w(e.tag,Y({ref:H,onMouseenter:P,onMouseleave:m,class:["v-navigation-drawer",`v-navigation-drawer--${r.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":x.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":v.value,"v-navigation-drawer--persistent":h.value,"v-navigation-drawer--active":d.value,"v-navigation-drawer--sticky":T.value},l.value,f.value,n.value,c.value,V.value,S.value,e.class],style:[i.value,Z.value,C.value,ge.value,e.style],inert:!d.value},I,s),{default:()=>[B&&N("div",{key:"image",class:"v-navigation-drawer__img"},[a.image?w(Je,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},a.image):w(je,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),a.prepend&&N("div",{class:"v-navigation-drawer__prepend"},[a.prepend?.()]),N("div",{class:"v-navigation-drawer__content"},[a.default?.()]),a.append&&N("div",{class:"v-navigation-drawer__append"},[a.append?.()])]}),w(Le,{name:"fade-transition"},{default:()=>[v.value&&(E.value||d.value)&&!!e.scrim&&N("div",Y({class:["v-navigation-drawer__scrim",J.backgroundColorClasses.value],style:[ye.value,J.backgroundColorStyles.value],onClick:()=>{h.value||(d.value=!1)}},I),null)]})])}),{isStuck:j}}}),Tt={class:"pa-2"},Bt={__name:"MainLayout",setup(e){const{mobile:u}=me(),s=A(!u.value),y=A(null),a=Ke();O(()=>{s.value=!u.value;const l=localStorage.getItem("user");l&&(y.value=JSON.parse(l))});const o=async()=>{try{await st.post("/api/logout")}catch(l){console.error(l)}finally{localStorage.removeItem("token"),localStorage.removeItem("user"),a.push("/login")}};return(l,n)=>{const f=Qe("router-view");return ee(),Q(Ge,null,{default:M(()=>[w(Vt,{modelValue:s.value,"onUpdate:modelValue":n[0]||(n[0]=i=>s.value=i),permanent:!te(u)},{append:M(()=>[N("div",Tt,[w(ve,{block:"",color:"error",variant:"text",onClick:o},{default:M(()=>[w(tt,{start:""},{default:M(()=>[...n[2]||(n[2]=[X("mdi-logout",-1)])]),_:1}),n[3]||(n[3]=X(" Cerrar Sesión ",-1))]),_:1})])]),default:M(()=>[w(ae,null,{default:M(()=>[w(U,{"prepend-avatar":"https://randomuser.me/api/portraits/lego/1.jpg",title:y.value?.name||"Usuario",subtitle:y.value?.email||"email@example.com"},null,8,["title","subtitle"])]),_:1}),w(et),w(ae,{density:"compact",nav:""},{default:M(()=>[w(U,{"prepend-icon":"mdi-home",title:"Inicio",value:"home",to:"/"}),w(U,{"prepend-icon":"mdi-chart-bar",title:"Estadísticas",value:"stats",to:"/stats"})]),_:1})]),_:1},8,["modelValue","permanent"]),w(ct,{color:"primary",density:"compact"},{default:M(()=>[te(u)?(ee(),Q(dt,{key:0,variant:"text",onClick:n[1]||(n[1]=lt(i=>s.value=!s.value,["stop"]))})):at("",!0),w(mt,null,{default:M(()=>[...n[4]||(n[4]=[X("Finanzas Personales",-1)])]),_:1}),w(ot)]),_:1}),w(nt,null,{default:M(()=>[w(f)]),_:1})]),_:1})}}};export{Bt as default};
